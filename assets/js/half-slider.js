function initHalfSlider(){for(var e=document.querySelectorAll(".half-slide-item__image"),a=document.querySelectorAll(".half-slider")[0].dataset.dispimgpath,t=[],i=0;i<e.length;i++){var n=e[i];t.push(n.getAttribute("src"))}new CanvasHalfSlider({container:"half-slider-items__image",sprites:t,displacementImage:a,autoPlay:!1,wacky:!0})}!function(e){"use strict";window.CanvasHalfSlider=function(a){var t=this;(a=a||{}).container=a.hasOwnProperty("container")?a.container:"",a.pixiSprites=a.hasOwnProperty("sprites")?a.sprites:[],a.autoPlay=!a.hasOwnProperty("autoPlay")||a.autoPlay,a.displaceScale=a.hasOwnProperty("displaceScale")?a.displaceScale:[200,70],a.displacementImage=a.hasOwnProperty("displacementImage")?a.displacementImage:"",a.wacky=!!a.hasOwnProperty("wacky")&&a.wacky,a.displaceScaleTo=!1===a.autoPlay?[0,0]:[20,20];var i=new PIXI.autoDetectRenderer(1080,1080,{transparent:!0}),n=new PIXI.Container,s=new PIXI.Container,r=new PIXI.Sprite.fromImage(a.displacementImage),l=new PIXI.filters.DisplacementFilter(r);this.currentIndex=0,this.initPixi=function(){document.getElementsByClassName(a.container)[0].appendChild(i.view),n.addChild(s),i.view.style.maxWidth="100%",i.view.style.top="50%",i.view.style.left="50%",i.view.style.webkitTransform="translate( -50%, -50% )",i.view.style.transform="translate( -50%, -50% )",r.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,n.filters=[l],!1===a.autoPlay&&(l.scale.x=0,l.scale.y=0),!0===a.wacky&&(r.anchor.set(.5),r.x=i.width/2,r.y=i.height/2),r.scale.x=2,r.scale.y=2,n.addChild(r)},this.loadPixiSprites=function(e){for(var t=a.sprites,i=0;i<t.length;i++){var n=new PIXI.Texture.fromImage(e[i]),r=new PIXI.Sprite(n);0!==i&&TweenMax.set(r,{alpha:0}),s.addChild(r)}};var o=new PIXI.ticker.Ticker;o.autoStart=!0,o.add(function(e){i.render(n)});var c=s.children;this.moveSlider=function(e){!0;var i=new TimelineMax({onComplete:function(){t.currentIndex=e,!1,!0===a.wacky&&r.scale.set(1)},onUpdate:function(){!0===a.wacky&&(r.rotation+=.02*i.progress(),r.scale.set(3*i.progress()))}});i.clear(),i.isActive()||i.to(l.scale,1,{x:a.displaceScale[0],y:a.displaceScale[1],ease:Power1.easeOut}).to(c[t.currentIndex],.5,{alpha:0,ease:Power2.easeOut},.2).to(c[e],.5,{alpha:1,ease:Power2.easeOut},.3).to(l.scale,1,{x:a.displaceScaleTo[0],y:a.displaceScaleTo[1],ease:Power2.easeOut},.3)},this.init=function(){t.initPixi(),t.loadPixiSprites(a.pixiSprites)},this.init(),t.moveSlider(0);new Swiper(".half-slider .swiper-container",{effect:"fade",speed:1500,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:!0,autoplay:{delay:6e3},mousewheel:!0,preventInteractionOnTransition:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,a){return'<span class="'+a+'">0'+(e+1)+"</span>"}},on:{init:function(){setTimeout(function(){e(".half-slider .swiper-slide.swiper-slide-active").addClass("animate-active")},500)},slideChange:function(){t.moveSlider(this.realIndex),e(".half-slider .swiper-slide").removeClass("animate-active"),e(".half-slider .swiper-slide").eq(this.realIndex).addClass("animate-active")}}});e(".half-slider .swiper-buttons > div").addClass("enabled"),e(".half-slider .swiper-pagination-bullet").addClass("enabled")}}(jQuery);
