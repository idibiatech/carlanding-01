function initMainSlider(){for(var e=document.querySelectorAll(".main-slide-item__image"),a=[],i=document.querySelectorAll(".main-slider")[0].dataset.dispimgpath,t=0;t<e.length;t++){var s=e[t];a.push(s.getAttribute("src"))}new CanvasMainSlider({container:"main-slider-items__image",sprites:a,displacementImage:i,autoPlay:!1,wacky:!0})}!function(e){"use strict";window.CanvasMainSlider=function(a){var i=this;(a=a||{}).container=a.hasOwnProperty("container")?a.container:"",a.pixiSprites=a.hasOwnProperty("sprites")?a.sprites:[],a.autoPlay=!a.hasOwnProperty("autoPlay")||a.autoPlay,a.displaceScale=a.hasOwnProperty("displaceScale")?a.displaceScale:[200,70],a.displacementImage=a.hasOwnProperty("displacementImage")?a.displacementImage:"",a.wacky=!!a.hasOwnProperty("wacky")&&a.wacky,a.displaceScaleTo=!1===a.autoPlay?[0,0]:[20,20];var t=new PIXI.autoDetectRenderer(1920,1080,{transparent:!0}),s=new PIXI.Container,n=new PIXI.Container,r=new PIXI.Sprite.fromImage(a.displacementImage),l=new PIXI.filters.DisplacementFilter(r);this.currentIndex=0,this.initPixi=function(){document.getElementsByClassName(a.container)[0].appendChild(t.view),s.addChild(n),t.view.style.maxWidth="100%",t.view.style.top="50%",t.view.style.left="50%",t.view.style.webkitTransform="translate( -50%, -50% )",t.view.style.transform="translate( -50%, -50% )",r.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,s.filters=[l],!1===a.autoPlay&&(l.scale.x=0,l.scale.y=0),!0===a.wacky&&(r.anchor.set(.5),r.x=t.width/2,r.y=t.height/2),r.scale.x=2,r.scale.y=2,s.addChild(r)},this.loadPixiSprites=function(e){for(var i=a.sprites,t=0;t<i.length;t++){var s=new PIXI.Texture.fromImage(e[t]),r=new PIXI.Sprite(s);0!==t&&TweenMax.set(r,{alpha:0}),n.addChild(r)}};var d=new PIXI.ticker.Ticker;d.autoStart=!0,d.add(function(e){t.render(s)});var o=n.children;this.moveSlider=function(e){!0;var t=new TimelineMax({onComplete:function(){i.currentIndex=e,!1,!0===a.wacky&&r.scale.set(1)},onUpdate:function(){!0===a.wacky&&(r.rotation+=.02*t.progress(),r.scale.set(3*t.progress()))}});t.clear(),t.isActive()||t.to(l.scale,1,{x:a.displaceScale[0],y:a.displaceScale[1],ease:Power1.easeOut}).to(o[i.currentIndex],.5,{alpha:0,ease:Power2.easeOut},.2).to(o[e],.5,{alpha:1,ease:Power2.easeOut},.3).to(l.scale,1,{x:a.displaceScaleTo[0],y:a.displaceScaleTo[1],ease:Power2.easeOut},.3)},this.init=function(){i.initPixi(),i.loadPixiSprites(a.pixiSprites)},this.init(),i.moveSlider(0);new Swiper(".main-slider .swiper-container",{effect:"fade",speed:1500,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:!0,mousewheel:!0,preventInteractionOnTransition:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,a){return'<span class="'+a+'">0'+(e+1)+"</span>"}},on:{init:function(){setTimeout(function(){e(".main-slider .swiper-slide.swiper-slide-active").addClass("animate-active")},500),e(".main-slider .swiper-slide").eq(this.realIndex).find(".dark").length?e("body").hasClass("dark-first")||e("body").addClass("dark-first"):e("body").removeClass("dark-first")},slideChange:function(){i.moveSlider(this.realIndex),e(".main-slider .swiper-slide").removeClass("animate-active"),e(".main-slider .swiper-slide").eq(this.realIndex).addClass("animate-active"),e(".main-slider .swiper-slide").eq(this.realIndex).find(".dark").length?e("body").hasClass("dark-first")||e("body").addClass("dark-first"):e("body").removeClass("dark-first")}}});e(".main-slider .swiper-buttons > div").addClass("enabled"),e(".main-slider .swiper-pagination-bullet").addClass("enabled")}}(jQuery);
